<h1>Product list</h1>
<%= link_to 'Add new', new_product_path, class: 'btn btn-success' %>
<%= form_with url: products_path, method: :get, local: true, class: 'mb-3' do %>
  <div class="input-group">
    <%= text_field_tag :search, params[:search], placeholder: "Search by name", class: 'form-control' %>
    <%= button_tag 'Search', class: 'btn btn-primary' %>
  </div>
<% end %>
<table class="table">
  <thead>
  <tr>
    <td>Name</td>
    <td>Quantity</td>
    <td>Price</td>
    <td>Discount</td>
    <td>Total Price</td>
    <td>Action</td>
  </tr>
  </thead>
  <tbody>
  <% @products.each do |product| %>
    <tr>
      <td><%= product.name %></td>
      <td><%= product.quantity %></td>
      <td><%= product.price %></td>
      <td class="text-danger"><%= product.discount %></td>
      <td>
        <%= product.price - (product.price * (product.discount * 0.01)) %>
      </td>
      <td class="d-flex flex-row gap-1">
        <%= button_to 'Delete', product_path(product), method: :delete, class: 'btn btn-sm btn-danger' %>
        <%= link_to 'Show', product_path(product), class: 'btn btn-sm btn-success' %>
        <%= link_to 'Edit', edit_product_path(product), class: 'btn btn-sm btn-info' %></td>
    </tr>
  <% end %>
  </tbody>
</table>